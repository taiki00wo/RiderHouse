<!DOCTYPE html>
<html>
  <head>
    <title>RiderHouse</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <link href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" rel="stylesheet">

    <%= include_gon %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>

  </head>

  <body>
    <header>
      <nav class="navbar navbar-expand-lg bg-info">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <%= link_to '一覧', riderhouses_path, class: 'nav-link text-white' %>
          </li>
          <li class="nav-item">
            <%= link_to '新規作成', new_riderhouse_path, class: 'nav-link text-white'%>
          </li>
          <li class="nav-item">
            <%= link_to 'ログイン', new_user_session_path, class: 'nav-link text-white'%>
          </li>
          <li class="nav-item">
            <%= link_to 'ログアウト', destroy_user_session_path, method: :delete, class: 'nav-link text-white'%>
          </li>
        </ul>

        <ul class="navbar-nav">
          <li class="nav-item">
          <%# もし現在のユーザーに画像があれば、表示する。無ければ,デフォルト画像を表示 %>
            <% if current_user.present? && current_user.image.url %>    
              <%= link_to image_tag(current_user.image.url, :size =>'50x50'), edit_user_registration_path, class: 'nav-link text-white rounded-circle'%>
            <% elsif current_user.present? %>
              <%= link_to image_tag('/images/default.png', :size =>'50x50'), edit_user_registration_path, class: 'nav-link text-white rounded-circle'%>
            <% end %>
          </li>
          <li class="nav-item">
            <% if current_user %>
              <%= link_to current_user.name, edit_user_registration_path, class: 'nav-link text-white'%>
            <% end %>
          </li>
        </ul>
      </nav>

    <% if flash[:notice] %>
      <div class="alert alert-success"><%= flash[:notice] %></div>
    <% end %>
    <% if flash[:alert] %>
      <div class="alert alert-success"><%= flash[:alert] %></div>
    <% end %>
    </header>

    <main>
      <div class="bg-mask">
        <%= yield %>
      </div>
    </main>
  </body>
</html>
